<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Teste Referrer</title>
</head>
<body>
<script>
async function verificarConvite() {
  // ðŸ”´ SIMULA de onde veio (apenas para teste)
  const veioDe = document.referrer;
  console.log("Veio de:", veioDe);

  const resposta = await fetch("lista.txt");
  const texto = await resposta.text();

  const blocos = texto.split("------------------------------------------------âŒ«");

  for (const bloco of blocos) {
    const origem = bloco.match(/âš¿\s*(.+)/);
    const destino = bloco.match(/âžª\s*(.+)/);

    if (!origem || !destino) continue;

    const siteOrigem = origem[1].trim().toLowerCase();
    const siteDestino = destino[1].trim();

    console.log("Comparando com:", siteOrigem);

    if (veioDe.toLowerCase().includes(siteOrigem)) {
      alert(
        "MATCH ENCONTRADO!\n\n" +
        "Veio de: " + siteOrigem + "\n" +
        "Vai para: " + siteDestino
      );
      return;
    }
  }

  window.location.href = "https://" + siteDestino;
}

verificarConvite();
</script>

</body>
</html>
