<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Teste Referrer</title>
</head>
<body>
<script>
async function verificarConvite() {
  const ref = document.referrer;

  console.log("Veio de:", ref);

  if (!ref) {
    console.log("Sem referrer");
    return;
  }

  const res = await fetch("lista.txt");
  const texto = await res.text();

  const blocos = texto.split("------------------------------------------------⌫");

  for (const bloco of blocos) {
    const origemMatch = bloco.match(/⚿\s*(.+)/);
    const destinoMatch = bloco.match(/➪\s*(.+)/);

    if (!origemMatch || !destinoMatch) continue;

    const origem = origemMatch[1].trim();
    const destino = destinoMatch[1].trim();

    console.log("Comparando com:", origem);
    
    if (ref.includes(origem)) {
      alert(
        "MATCH ENCONTRADO!\n\n" +
        "Veio de: " + origem + "\n" +
        "Vai para: " + destino
      );
      return;
    }
  }

  console.log("Nenhum convite encontrado");
}

verificarConvite();
        </script>
</body>
</html>
